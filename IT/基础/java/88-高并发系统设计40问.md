## 高并发系统设计40问

### 开篇词 | 为什么你要学习高并发系统设计？

### 1. 高并发系统：它的通用设计方法是什么？

应对高并发大流量时也会采用类似“抵御洪水”的方案，归纳起来共有三种方法：
　　**Scale-out（横向扩展）**：分而治之是一种常见的高并发系统设计方法，采用分布式部署的方式把流量分流开，让每个服务器都承担一部分并发和流量。
　　**缓存**：使用缓存来提高系统的性能，就好比用“拓宽河道”的方式抵抗高并发大流量的冲击。
　　**异步**：在某些场景下，未处理完成之前，我们可以让请求先返回，在数据准备好之后再通知请求方，这样可以在单位时间内处理更多的请求。

### 2.架构分层有什么好处？

1. 分层的设计可以简化系统设计，让不同的人专注做某一层次的事情。
2. 分层之后可以做到很高的复用。
3. 分层架构可以让我们更容易做横向扩展。

[阿里巴巴Java开发手册v1.4.0（详尽版）](https://yq.aliyun.com/articles/69327)

### 3.如何提升系统性能？

性能优化原则：
首先，性能优化一定不能盲目，一定是问题导向的。
其次，性能优化也遵循“八二原则”，抓住主要矛盾，优先优化主要的性能瓶颈点。
再次，性能优化也要有数据支撑。
最后，性能优化的过程是持续的。

性能度量的指标：
平均值、最大值、分位置

高并发下的性能优化：
提高系统的处理核心数：在性能压测下找到拐点模型。
减少单次任务响应时间：如 Linux 的 perf、eBPF。

### 4.系统怎样做到高可用？

### 5.系统如何做的易于扩展？

## 高并发—数据库篇：

### 1.池化技术：

数据库连接池：

tomcat连接池：

http连接池：

redis连接池：

2.数据库主从分离：

常用的支持分库分表中间件：
sharding-jdbc（当当）
TSharding（蘑菇街）
Atlas（奇虎360）
Cobar（阿里巴巴）
MyCAT（基于Cobar）
Oceanus（58同城）
Vitess（谷歌）

3.如何保证分库分表后ID的全局唯一性？

基于 Snowflake 算法搭建发号器；
基于数据库生成 ID 的方案。

4.nosql使用：